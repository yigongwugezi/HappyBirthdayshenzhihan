{"version":3,"file":"main.js","sources":["webpack://happy-birthday/./script/main.js"],"sourcesContent":["let audioUrl = \"\"\r\nlet audio = null\r\nlet isPlaying = false\r\n\r\n// Import the data to customize and insert them into page\r\nconst fetchData = () => {\r\n  fetch(\"customize.json\")\r\n    .then(data => data.json())\r\n    .then(data => {\r\n      dataArr = Object.keys(data)\r\n      dataArr.map(customData => {\r\n        if (data[customData] !== \"\") {\r\n          if (customData === \"imagePath\") {\r\n            document\r\n              .querySelector(`[data-node-name*=\"${customData}\"]`)\r\n              .setAttribute(\"src\", data[customData])\r\n          } else if (customData === \"fonts\") {\r\n            data[customData].forEach(font => {\r\n              const link = document.createElement('link')\r\n              link.rel = 'stylesheet'\r\n              link.href = font.path\r\n              document.head.appendChild(link)\r\n              //设置body字体\r\n              document.body.style.fontFamily = font.name\r\n            })\r\n          } else if (customData === \"music\") {\r\n            audioUrl = data[customData]\r\n            audio = new Audio(audioUrl)\r\n            audio.preload = \"auto\"\r\n          } else {\r\n            document.querySelector(`[data-node-name*=\"${customData}\"]`).innerText = data[customData]\r\n          }\r\n        }\r\n\r\n        // Check if the iteration is over\r\n        // Run amimation if so\r\n        if (dataArr.length === dataArr.indexOf(customData) + 1) {\r\n          document.querySelector(\"#startButton\").addEventListener(\"click\", () => {\r\n            document.querySelector(\".startSign\").style.display = \"none\"\r\n            animationTimeline()\r\n          }\r\n          )\r\n          // animationTimeline()\r\n        }\r\n      })\r\n    })\r\n}\r\n\r\n// Animation Timeline\r\nconst animationTimeline = () => {\r\n  // Spit chars that needs to be animated individually\r\n  const textBoxChars = document.getElementsByClassName(\"hbd-chatbox\")[0]\r\n  const hbd = document.getElementsByClassName(\"wish-hbd\")[0]\r\n\r\n  textBoxChars.innerHTML = `<span>${textBoxChars.innerHTML\r\n    .split(\"\")\r\n    .join(\"</span><span>\")}</span`\r\n\r\n  hbd.innerHTML = `<span>${hbd.innerHTML\r\n    .split(\"\")\r\n    .join(\"</span><span>\")}</span`\r\n\r\n  const ideaTextTrans = {\r\n    opacity: 0,\r\n    y: -20,\r\n    rotationX: 5,\r\n    skewX: \"15deg\"\r\n  }\r\n\r\n  const ideaTextTransLeave = {\r\n    opacity: 0,\r\n    y: 20,\r\n    rotationY: 5,\r\n    skewX: \"-15deg\"\r\n  }\r\n\r\n  const tl = new TimelineMax()\r\n\r\n  tl\r\n    .to(\".container\", 0.1, {\r\n      visibility: \"visible\"\r\n    })\r\n    .from(\".one\", 0.7, {\r\n      opacity: 0,\r\n      y: 10\r\n    })\r\n    .from(\".two\", 0.4, {\r\n      opacity: 0,\r\n      y: 10\r\n    })\r\n    .to(\r\n      \".one\",\r\n      0.7,\r\n      {\r\n        opacity: 0,\r\n        y: 10\r\n      },\r\n      \"+=2.5\"\r\n    )\r\n    .to(\r\n      \".two\",\r\n      0.7,\r\n      {\r\n        opacity: 0,\r\n        y: 10\r\n      },\r\n      \"-=1\"\r\n    )\r\n    .from(\".three\", 0.7, {\r\n      opacity: 0,\r\n      y: 10\r\n      // scale: 0.7\r\n    })\r\n    .to(\r\n      \".three\",\r\n      0.7,\r\n      {\r\n        opacity: 0,\r\n        y: 10\r\n      },\r\n      \"+=2\"\r\n    )\r\n    .from(\".four\", 0.7, {\r\n      scale: 0.2,\r\n      opacity: 0\r\n    })\r\n    .from(\".fake-btn\", 0.3, {\r\n      scale: 0.2,\r\n      opacity: 0\r\n    })\r\n    .staggerTo(\r\n      \".hbd-chatbox span\",\r\n      0.5,\r\n      {\r\n        visibility: \"visible\"\r\n      },\r\n      0.05\r\n    )\r\n    .to(\".fake-btn\", 0.1, {\r\n      backgroundColor: \"#8FE3B6\"\r\n    })\r\n    .to(\r\n      \".four\",\r\n      0.5,\r\n      {\r\n        scale: 0.2,\r\n        opacity: 0,\r\n        y: -150\r\n      },\r\n      \"+=0.7\"\r\n    )\r\n    .from(\".idea-1\", 0.7, ideaTextTrans)\r\n    .to(\".idea-1\", 0.7, ideaTextTransLeave, \"+=1.5\")\r\n    .from(\".idea-2\", 0.7, ideaTextTrans)\r\n    .to(\".idea-2\", 0.7, ideaTextTransLeave, \"+=1.5\")\r\n    .from(\".idea-3\", 0.7, ideaTextTrans)\r\n    .to(\".idea-3 strong\", 0.5, {\r\n      scale: 1.2,\r\n      x: 10,\r\n      backgroundColor: \"rgb(21, 161, 237)\",\r\n      color: \"#fff\"\r\n    })\r\n    .to(\".idea-3\", 0.7, ideaTextTransLeave, \"+=1.5\")\r\n    .from(\".idea-4\", 0.7, ideaTextTrans)\r\n    .to(\".idea-4\", 0.7, ideaTextTransLeave, \"+=1.5\")\r\n    .from(\r\n      \".idea-5\",\r\n      0.7,\r\n      {\r\n        rotationX: 15,\r\n        rotationZ: -10,\r\n        skewY: \"-5deg\",\r\n        y: 50,\r\n        z: 10,\r\n        opacity: 0\r\n      },\r\n      \"+=0.5\"\r\n    )\r\n    .to(\r\n      \".idea-5 .smiley\",\r\n      0.7,\r\n      {\r\n        rotation: 90,\r\n        x: 8\r\n      },\r\n      \"+=0.4\"\r\n    )\r\n    .to(\r\n      \".idea-5\",\r\n      0.7,\r\n      {\r\n        scale: 0.2,\r\n        opacity: 0\r\n      },\r\n      \"+=2\"\r\n    )\r\n    .staggerFrom(\r\n      \".idea-6 span\",\r\n      0.8,\r\n      {\r\n        scale: 3,\r\n        opacity: 0,\r\n        rotation: 15,\r\n        ease: Expo.easeOut\r\n      },\r\n      0.2\r\n    )\r\n    .staggerTo(\r\n      \".idea-6 span\",\r\n      0.8,\r\n      {\r\n        scale: 3,\r\n        opacity: 0,\r\n        rotation: -15,\r\n        ease: Expo.easeOut\r\n      },\r\n      0.2,\r\n      \"+=1\"\r\n    )\r\n    .staggerFromTo(\r\n      \".baloons img\",\r\n      2.5,\r\n      {\r\n        opacity: 0.9,\r\n        y: 1400\r\n      },\r\n      {\r\n        opacity: 1,\r\n        y: -1000\r\n      },\r\n      0.2\r\n    )\r\n    .from(\r\n      \".lydia-dp\",\r\n      0.5,\r\n      {\r\n        scale: 3.5,\r\n        opacity: 0,\r\n        x: 25,\r\n        y: -25,\r\n        rotationZ: -45\r\n      },\r\n      \"-=2\"\r\n    )\r\n    .from(\".hat\", 0.5, {\r\n      x: -100,\r\n      y: 350,\r\n      rotation: -180,\r\n      opacity: 0\r\n    })\r\n    .staggerFrom(\r\n      \".wish-hbd span\",\r\n      0.7,\r\n      {\r\n        opacity: 0,\r\n        y: -50,\r\n        // scale: 0.3,\r\n        rotation: 150,\r\n        skewX: \"30deg\",\r\n        ease: Elastic.easeOut.config(1, 0.5)\r\n      },\r\n      0.1\r\n    )\r\n    .staggerFromTo(\r\n      \".wish-hbd span\",\r\n      0.7,\r\n      {\r\n        scale: 1.4,\r\n        rotationY: 150\r\n      },\r\n      {\r\n        scale: 1,\r\n        rotationY: 0,\r\n        color: \"#ff69b4\",\r\n        ease: Expo.easeOut\r\n      },\r\n      0.1,\r\n      \"party\"\r\n    )\r\n    .from(\r\n      \".wish h5\",\r\n      0.5,\r\n      {\r\n        opacity: 0,\r\n        y: 10,\r\n        skewX: \"-15deg\"\r\n      },\r\n      \"party\"\r\n    )\r\n    .staggerTo(\r\n      \".eight svg\",\r\n      1.5,\r\n      {\r\n        visibility: \"visible\",\r\n        opacity: 0,\r\n        scale: 80,\r\n        repeat: 3,\r\n        repeatDelay: 1.4\r\n      },\r\n      0.3\r\n    )\r\n    .to(\".six\", 0.5, {\r\n      opacity: 0,\r\n      y: 30,\r\n      zIndex: \"-1\"\r\n    })\r\n    .staggerFrom(\".nine p\", 1, ideaTextTrans, 1.2)\r\n    .to(\r\n      \".last-smile\",\r\n      0.5,\r\n      {\r\n        rotation: 90\r\n      },\r\n      \"+=1\"\r\n    )\r\n\r\n  // tl.seek(\"currentStep\");\r\n  // tl.timeScale(2);\r\n\r\n  // Restart Animation on click\r\n  const replyBtn = document.getElementById(\"replay\")\r\n  replyBtn.addEventListener(\"click\", () => {\r\n    tl.restart()\r\n\r\n  })\r\n}\r\n\r\n// Run fetch and animation in sequence\r\nfetchData()\r\n\r\nconst playPauseButton = document.getElementById('playPauseButton')\r\n\r\ndocument.getElementById('startButton').addEventListener('click', () => {\r\n  if (audio) {\r\n    togglePlay(true)\r\n  }\r\n})\r\n\r\nplayPauseButton.addEventListener('click', () => {\r\n  if (audio) {\r\n    togglePlay(!isPlaying)\r\n  }\r\n})\r\n\r\nfunction togglePlay(play) {\r\n  if (!audio) return\r\n  \r\n  isPlaying = play\r\n  play ? audio.play() : audio.pause()\r\n  playPauseButton.classList.toggle('playing', play)\r\n}"],"names":["audioUrl","audio","isPlaying","animationTimeline","textBoxChars","document","getElementsByClassName","hbd","innerHTML","split","join","ideaTextTrans","opacity","y","rotationX","skewX","ideaTextTransLeave","rotationY","tl","TimelineMax","to","visibility","from","scale","staggerTo","backgroundColor","x","color","rotationZ","skewY","z","rotation","staggerFrom","ease","Expo","easeOut","staggerFromTo","Elastic","config","repeat","repeatDelay","zIndex","replyBtn","getElementById","addEventListener","restart","fetch","then","data","json","dataArr","Object","keys","map","customData","querySelector","setAttribute","forEach","font","link","createElement","rel","href","path","head","appendChild","body","style","fontFamily","name","Audio","preload","innerText","length","indexOf","display","playPauseButton","togglePlay","play","pause","classList","toggle"],"mappings":"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"}